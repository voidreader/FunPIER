<?xml version="1.0" encoding="utf-8" ?>
<!-- キッス -->
<kyscript>
  
  <frame count ="0"/>
  <var name="stat" op="set" value="0"/>

  <beginTimer id ="tm0" duration="900"/>
  <beginIf id="to0" target="animend" name ="tm0" goto="900" priority="1"/>
  
  <useAndShow id ="bg" res ="kiss/kissGround" pos ="0,-80,2"/>
  <useAndShow id ="couple" res ="kiss/kissCouple" pos ="100,-10,1"/>
  <useAndShow id ="omae" res ="kiss/kissOmaeWalk" pos ="-180,-30,0"/>
  <beginSound name="bgm_love" loop="true"/>
  <beginMove id="omae" to="-40,-30" duration ="240"/>
  <beginDrag id="omae" range="-240,-100,240,0"/>
  <beginIf id="goal1" target="object" name="omae" crange="-210,-30, 60,240" goto="1000"/>
  <beginIf id="goal2" target="object" name="omae" crange="210,-30, 60,240" goto="2000"/>

  <beginIf id="goal3" target="object" name="omae" crange="40,-10, 30,30" goto="3000"/>
  <beginIf id="goal４" target="object" name="omae" crange="100,-10, 60,120" goto="1500"/>
  <wait />

  <!-- 時間切れ -->
  <frame count ="900"/>
  <halt result ="0"/>

  <!-- 引き返す -->
  <frame count ="1000"/>
  <endIf id ="to0"/>
  <endMove id="omae"/>
  <halt result ="1"/>

  <!-- 近くを通った-->
  <frame count ="1500"/>
  <var name="stat" op="set" value="1"/>
  <wait />


  <!-- 通り過ぎる -->
  <frame count ="2000"/>
  <endIf id ="to0"/>
  <endMove id="omae"/>
  <beginIfVar lhs="$stat" op="eq" rhs="1" goto="2100"/>
  <halt result ="1"/>
  
  <frame count ="2100"/>
  <halt result ="2"/>
  
  <!-- 通り過ぎる -->
  <frame count ="3000"/>
  <endIf id ="to0"/>
  <endIf id ="all"/>
  <endMove id="omae"/>
  <endDrag id="omae"/>
  <var name="secret" op="set" value="1"/>
  <beginMove id="omae" to="64,-10" duration ="10"/>
  <frame count ="3005"/>
  <beginMove id="couple" to="108,-2" duration ="8"/>
  <beginSound name="se_down" />
  <frame count ="3010"/>
  <beginMove id="omae" to="290,-20" duration ="60"/>
  <frame count ="3013"/>
  <unuse id ="couple"/>
  <useAndShow id ="couple2" res ="kiss/kissCouple-07" pos ="108,-2,1"/>

  <frame count ="3240"/>
  <halt result ="2"/>

</kyscript>